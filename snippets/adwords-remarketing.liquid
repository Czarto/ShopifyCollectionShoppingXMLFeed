{% comment %} Enter your google conversion id below {% endcomment %}
{% assign google_conversion_id = 0 %}
{% assign shopify_store_country  = 'US' %}
{% if shop.currency == 'CAD' %}
{% assign shopify_store_country  = 'CA' %}
{% if shop.currency == 'AUD' %}
{% assign shopify_store_country  = 'AU' %}
{% if shop.currency == 'GBP' %}
{% assign shopify_store_country  = 'GB' %}
{% endif %}

<!-- Global site tag (gtag.js) - AdWords: XXXXXXXXX -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-XXXXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-XXXXXXXXX');
</script>
<script>
  gtag('event', 'page_view', {
    'send_to': 'AW-XXXXXXXXX',
  
    {% if template contains 'cart' %}
	var google_tag_params = {
  		ecomm_prodid: [{% for item in cart.items %}'shopify_{{ shopify_store_country  }}_{{ item.product.id }}_{{ item.variant.id }}'{% unless forloop.last %}, {% endunless %}{% endfor %}],
  		ecomm_pagetype: 'cart',
  		ecomm_totalvalue: {{ cart.total_price | money_without_currency  | remove: ','  }}
	};
  
  {% elsif template contains 'collection' %}
	var google_tag_params = {
  		ecomm_prodid: [{% for item in collection.products limit:5 %}'shopify_{{ shopify_store_country  }}_{{ item.id }}_{{ item.variants.first.id }}'{% unless forloop.last %}, {% endunless %}{% endfor %}],
  		ecomm_pagetype: 'category',
  		ecomm_category: '{{ collection.handle }}'
	};
  
  {% elsif template contains 'index' %}
	var google_tag_params = {
  		ecomm_pagetype: 'home'
	};
  
  {% elsif template contains 'product' %}
	var google_tag_params = {
      ecomm_prodid: 'shopify_{{ shopify_store_country  }}_{{ product.id }}_{{ product.selected_or_first_available_variant.id }}',
  		ecomm_pagetype: 'product',
  		ecomm_totalvalue: {{ product.selected_or_first_available_variant.price | money_without_currency  | remove: ','  }}
	};
  
  {% elsif template contains 'search' %}
	var google_tag_params = {
  		ecomm_prodid: [{% for item in search.results limit:5 %}'shopify_{{ shopify_store_country  }}_{{ item.id }}_{{ item.variants.first.id }}'{% unless forloop.last %}, {% endunless %}{% endfor %}],
  		ecomm_pagetype: 'searchresults'
	};
  {% else %}
	var google_tag_params = {
  		ecomm_pagetype: 'other'
	};
  
  {% endif %}
  });
</script>


